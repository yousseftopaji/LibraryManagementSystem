syntax = "proto3";
option java_multiple_files = true;

package dk.via.sep3;

message DTOBook {
  string id = 1;
  string title = 2;
  string author = 3;
  string isbn = 4;
  string state = 5;
}

message DTOLoan {
  string id = 1;
  string borrowDate = 2;
  string dueDate = 3;
  bool isReturned = 4;
  int32 numberOfExtensions = 5;
  string username = 6;
  string bookId = 7;
}

message GetAllBooksRequest {
}

message GetAllBooksResponse {
  repeated DTOBook books = 1;
}

message GetBookByIsbnRequest {
  string isbn = 1;
}

message GetBookByIsbnResponse {
<<<<<<< Updated upstream
<<<<<<< Updated upstream
 repeated DTOBook book = 1;
=======
  repeated DTOBook book = 1;
>>>>>>> Stashed changes
=======
  repeated DTOBook book = 1;
>>>>>>> Stashed changes
}

message CreateLoanRequest {
  string username = 1;
  string bookId = 2;
  int32 loanDurationDays = 3;
}

message CreateLoanResponse {
  DTOLoan loan = 1;
  bool success = 2;
  string message = 3;
}

service BookService {
  rpc getAllBooks (GetAllBooksRequest) returns (GetAllBooksResponse);
  rpc getBookByIsbn (GetBookByIsbnRequest) returns (GetBookByIsbnResponse);
}

service LoanService {
  rpc createLoan (CreateLoanRequest) returns (CreateLoanResponse);
}