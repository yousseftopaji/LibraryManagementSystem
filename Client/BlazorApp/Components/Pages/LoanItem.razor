@using DTOs.Loan
@using BlazorApp.Components.ViewModels

<div class="list-group-item">
    <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-1">Loan ID: @Model?.BookId  </h5>
        <small>Due: @(Model?.FormattedDueDate ?? "-")</small>
    </div>
    <p class="mb-1">Book ID: @(Model?.BookId ?? 0)</p>
    <small>Borrowed: @(Model?.FormattedBorrowDate ?? "-") â€¢ Extensions: @(Model?.NumberOfExtensions ?? 0)</small>
    <div class="mt-2">
        <button class="btn btn-outline-primary btn-sm" @onclick="() => OnExtendRequested.InvokeAsync(OriginalLoan)">Extend Book</button>
    </div>
</div>

@code {
    [Parameter]
    public LoanDTO? OriginalLoan { get; set; }

    // internal view model for rendering
    private LoanViewModel? Model => (OriginalLoan != null) ? new LoanViewModel(OriginalLoan) : null;

    [Parameter]
    public EventCallback<LoanDTO> OnExtendRequested { get; set; }
}
